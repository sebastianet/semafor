<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

 <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

 <link rel="shortcut icon" href="./favicon.ico" />

 <link rel="stylesheet" type="text/css" href="css/sem.css" />

 <title> Semafor d'en JA </title>
 <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
 
</head>

<body id="home">

<hr>

<div id="container">

<div id="header">
    <h1> Benvingut a la web de manegament del sem&agrave;for </h1>
</div>

<hr>

<div id="navegacio">

<h2> Navegaci&oacute; </h2>

<ul>

 <li> Llum verd (18) : 
<a href="#" id="clk_Encendre_Verd">engegar</a>
/ 
<a href="#" id="clk_Apagar_Verd">apagar</a>
/
<a href="#" id="clk_engegar_Intermitent_Verd">intermitent</a>

 <li> Llum groc (15) :
<a href="#" id="clk_Encendre_Groc">engegar</a>
/
<a href="#" id="clk_Apagar_Groc">apagar</a>
/
<a href="#" id="clk_engegar_Intermitent_Groc">intermitent</a>

 <li> Llum vermell (16) :
<a href="#" id="clk_Encendre_Vermell">engegar</a>
/
<a href="#" id="clk_Apagar_Vermell">apagar</a>
/
<a href="#" id="clk_engegar_Intermitent_Vermell">intermitent</a>

 <li> Els 3 llums :
<a href="#" id="clk_Encendre_Tres_Llums">engegar</a>
/ apagar /
<a href="#" id="clk_engegar_Intermitent_Tres_Lums">intermitent</a>

 <li> Sequencia Verd -> Groc -> Vermell : 
 <a href="#" id="clkActivar">engegar</a>
 /
 <a href="#" id="clkAturar">apagar</a>

 <li> Velocitat de repetici&oacute; :

<a href="#" id="clkRepeticioLenta">baixa</a>
/
<a href="#" id="clkRepeticioNormal">mitjana</a>
/ 
<a href="#" id="clkRepeticioRapida">rapida</a>

 <li> Foto : primer
<a href="#" id="clkFoto_fer">fer-la</a> (compte : triga 3-4 segons) i despres <a href="#" id="clkFoto_show">mostrar-la</a>.
Podem
<a href="#" id="clkFoto_netejar">netejar</a> la pantalla.
O
<a href="#" id="clkFoto_esborrar">esborrar</a> el fitxer !
Esborrar cache : Ctrl + Shift + Delete

</ul>

</div>

<hr>

<table class="timg">
<tr>
<td width="60%">
<h2> StatusQuo :</h2>

<div id="contingut">
 &nbsp; estatus
</div>

<td width="40%">

<div id="imatge_div">
 <img id="imatge_webcam" src="/images/blanc.jpg" width="300" height="250">
Imatge de la web-cam [300x250]
</div>

</table>

<hr>

<div id="anuncis">
 Espai reservat per anuncis, noticies, etc
</div>

<hr>

<div id="peudepagina">
 <table class="tpeu">
 <tr>

 <td>
 <a href="#">Privacy</a> | <a href="#">Terms</a>

 <td>
 Valid <a href="http://validator.w3.org/check?uri=referer">XHTML</a> | Valid <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a>
 
 <td>
 &copy; 2016 &amp; 2015, <a href="https://github.com/sebastianet/wCDT">Sebas</a> @
<a href="https://github.com/sebastianet/semafor">git</a>

 <td>
 
 Help | <a href="#" id="clkId">Id</a>

 <td>
  <div id="my_date">
  &nbsp;
  </div>

 </table>
</div>

</div>

<hr>

<script>


$( function() { // DOM ready
    console.log( '*** client DOM ready.' ) ;
    $.get( '/initial.htm', function( page ) {  // posem al CONTENT (we are a SPA) la sub-pagina INITAL.HTML
        console.log( '*** Demanem al server INITIAL.HTM, initial SPA text.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; // get(initial.htm)

// posar la data actual a baix a l'esquerra - aixi diferenciem re-loads - "Now is"
    var szAra = 'Timestamp [' + (new Date).yyyymmdd() +', '+ (new Date).hhmmss() + ']' ;
    $( "#my_date" ).html( szAra ) ; // show actual date

} ) ; // DOM ready


$( "#clkId" ).click( function() {
    $.get( '/identificar', function( page ) {
        console.log( '*** index - demanem al server IDENTIFICAR.' ) ;
        $( "#anuncis" ).html( page ) ; // show received HTML at specific <div>
    }) ; // get(activar)
}) ; // identificar


$( "#clkActivar" ).click( function() {
    $.get( '/activar-sequencia-VAR', function( page ) {
        console.log( '*** index - demanem al server ACTIVAR sequencia VAR.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; // get(activar)
}) ; // activar sequencia VAR


$( "#clkAturar" ).click( function() {
    $.get( '/parar-sequencia-VAR', function( page ) {
        console.log( '*** index - demanem al server ATURAR sequencia VAR.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; // get(aturar)
}) ; // aturar sequencia VAR


$( "#clk_Apagar_Verd" ).click( function() {
    $.post( '/menu_apagar_llum/Color=verd', function( page ) {
        console.log( '*** index - demanem al server APAGAR LLUM VERD.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; 
}) ; // apagar verd

$( "#clk_Apagar_Groc" ).click( function() {
    $.post( '/menu_apagar_llum/Color=groc', function( page ) {
        console.log( '*** index - demanem al server APAGAR LLUM GROC.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; 
}) ; // apagar groc

$( "#clk_Apagar_Vermell" ).click( function() {
    $.post( '/menu_apagar_llum/Color=vermell', function( page ) {
        console.log( '*** index - demanem al server APAGAR LLUM VERMELL.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; 
}) ; // apagar vermell

 
$( "#clk_Encendre_Verd" ).click( function() {
    $.post( '/menu_encendre_llum/Color=verd', function( page ) {
        console.log( '*** index - demanem al server ENCENDRE LLUM VERD.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; 
}) ; // encendre verd

$( "#clk_Encendre_Groc" ).click( function() {
    $.post( '/menu_encendre_llum/Color=groc', function( page ) {
        console.log( '*** index - demanem al server ENCENDRE LLUM GROC.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // encendre groc

$( "#clk_Encendre_Vermell" ).click( function() {
    $.post( '/menu_encendre_llum/Color=vermell', function( page ) {
        console.log( '*** index - demanem al server ENCENDRE LLUM VERMELL.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // encendre vermell

$( "#clk_Encendre_Tres_Llums" ).click( function() {
    $.post( '/menu_encendre_llum/Color=tres_llums', function( page ) {
        console.log( '*** index - demanem al server ENCENDRE 3 LLUMS.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // encendre vermell



$( "#clk_engegar_Intermitent_Verd" ).click( function() {
    $.post( '/menu_engegar_sequencia/Tipus_intermitent_verd', function( page ) {
        console.log( '*** index - demanem al server engegar INTERMITENT VERD.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // engegar intermitent verd

$( "#clk_engegar_Intermitent_Groc" ).click( function() {
    $.post( '/menu_engegar_sequencia/Tipus=intermitent_groc', function( page ) {
        console.log( '*** index - demanem al server engegar INTERMITENT GROC.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // engegar intermitent groc

$( "#clk_engegar_Intermitent_Vermell" ).click( function() {
    $.post( '/menu_engegar_sequencia/Tipus=intermitent_vermell', function( page ) {
        console.log( '*** index - demanem al server engegar INTERMITENT VERMELL.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // engegar intermitent vermell

$( "#clk_engegar_Intermitent_Tres_Lums" ).click( function() {
    $.post( '/menu_engegar_sequencia/Tipus=intermitent_tres_llums', function( page ) {
        console.log( '*** index - demanem al server engegar INTERMITENT 3 LLUMS.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // engegar intermitent 3 llums



$( "#clkRepeticioRapida" ).click( function() {
    $.post( '/modificar_interval/Periode=rapid', function( page ) {
        console.log( '*** index - demanem al server PERIODE PETIT.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // periode rapid

$( "#clkRepeticioNormal" ).click( function() {
    $.post( '/modificar_interval/Periode=mitja', function( page ) {
        console.log( '*** index - demanem al server PERIODE MITJA.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // periode mitja

$( "#clkRepeticioLenta" ).click( function() {
    $.post( '/modificar_interval/Periode=lent', function( page ) {
        console.log( '*** index - demanem al server PERIODE GRAN.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ;
}) ; // periode lent


$( "#clkFoto_esborrar" ).click( function() {
    $.get( '/foto_esborrar', function( page ) {
        console.log( '*** index - demanem al server ESBORRAR la foto.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; // get(activar)
}) ; // esborrar foto


$( "#clkFoto_netejar" ).click( function() {
    $( "#imatge_webcam" ).attr( 'src', '/images/1-webcam.png' ) ;
    var szOut = 'netegem el espai de la foto' ;
    $( "#contingut" ).html( szOut ) ; // show this HTML at specific <div>
}) ; // netejar foto


$( "#clkFoto_show_directe" ).click( function() {
    var szFileFoto = '/images/webcam.png' ;
    console.log( '*** index - MOSTREM una foto (%s).', szFileFoto ) ;
    $( "#imatge_webcam" ).attr( 'src', szFileFoto ) ;
    var szOut = 'foto (' + szFileFoto + ') amostrada' ;
    $( "#contingut" ).html( szOut ) ; // show this HTML at specific <div>
}) ; // mostrar foto

$( "#clkFoto_show" ).click( function() {
    $.get( '/mostrar_foto', function( page ) {
        console.log( '*** index - demanem al server la darrera foto.' ) ;
//      $( "#imatge_webcam" ).attr( 'src', page ) ;
        $( "#imatge_div" ).html( page ) ; //  <div id="imatge_div">
    }) ; // get(mostrar)
}) ; // mostrar foto


$( "#clkFoto_fer" ).click( function() {
    $.get( '/fer_foto', function( page ) {
        console.log( '*** index - demanem al server FER una foto.' ) ;
        $( "#contingut" ).html( page ) ; // show received HTML at specific <div>
    }) ; // get(activar)
}) ; // fer foto


// nova funcio yymmdd de Date() - at client
Date.prototype.yyyymmdd = function () {                            
	var yyyy = this.getFullYear().toString();                                    
	var mm   = (this.getMonth()+1).toString(); // getMonth() is zero-based         
	var dd   = this.getDate().toString();
	return yyyy + '/' + (mm[1]?mm:"0"+mm[0]) + '/' + (dd[1]?dd:"0"+dd[0]);
} ; // yyyymmd

Date.prototype.hhmmss = function () {
	function fixTime(i) {
        return (i < 10) ? "0" + i : i;
    }
	var today = new Date(),
	    hh = fixTime( today.getHours() ),
		mm = fixTime( today.getMinutes() ),
		ss = fixTime( today.getSeconds() ) ;
	var myHHMMSS = hh + ':' + mm + ':' + ss ;
	return myHHMMSS ;
} ; // hhmmss

</script>

</body>
</html>

